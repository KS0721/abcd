/* ========================================
   base.css - 리셋, 변수, 다크모드, 고대비, 기본 스타일
   접근성: WCAG 2.1 SC 1.4.6 AAA 7:1 고대비 기준 준수
   
   [근거 논문]
   - WCAG 2.1 SC 1.4.6 Enhanced Contrast (W3C, 2018)
     : 7:1 비율은 20/80 시력 사용자의 대비 민감도 손실 보상
   - Wilkinson, Elko, McCarty et al. (2023). An Evidence-Based
     Approach to AAC Design for Individuals with CVI. AJSLP, 32(5), 1939-1960.
     : CVI 사용자 AAC 디자인 시 시각적 복잡성 최소화, 고대비 권장
   - Light, Wilkinson, Thiessen et al. (2019). Designing Effective
     AAC Displays. AAC, 35(1), 42-55.
     : 그리드 디스플레이에서 색상 클러스터링이 시각 탐색 촉진
   - Lighthouse Guild: 저시력 사용자 웹사이트에서
     검정+흰/검정+노랑 고대비 조합만 제공 (실무 근거)
   - Perkins School for the Blind (2024): 저시력 접근성에서
     검정+노랑 키보드가 가장 널리 사용되는 고대비 조합
   ======================================== */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary: #2B6CB0;
    --primary-light: #4A90D9;
    --primary-dark: #1A4971;
    --secondary: #EBF4FF;
    --accent-green: #38A169;
    --danger: #C53030;
    --danger-light: #FFF5F5;
    --text-dark: #1A202C;
    --text-medium: #4A5568;
    --text-light: #5E6A7A;
    --white: #FFFFFF;
    --gray-bg: #F7FAFC;
    --gray-border: #CBD5E0;
    --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 8px 20px rgba(0, 0, 0, 0.12);
    --radius: 14px;
    --radius-sm: 10px;
    --radius-lg: 20px;

    --header-height: 52px;
    --output-height: 68px;
    --tabbar-height: 60px;
    --safe-bottom: env(safe-area-inset-bottom, 0px);

    --base-font-size: 16px;
    --card-text-size: 0.85rem;
    --tab-text-size: 0.75rem;
    --menu-text-size: 0.9rem;

    --card-columns: 4;
    --card-gap: 10px;
    --card-padding: 14px 8px;
    --card-icon-size: 42px;

    --card-border-width: 3px;
    --selected-border-width: 4px;
}

/* ========== 다크모드 ========== */
body.dark-mode {
    --primary: #63B3ED;
    --primary-light: #90CDF4;
    --primary-dark: #2B6CB0;
    --secondary: #1A202C;
    --text-dark: #F7FAFC;
    --text-medium: #CBD5E0;
    --text-light: #A0AEC0;
    --white: #171923;
    --gray-bg: #0D1117;
    --gray-border: #2D3748;
    --danger-light: #2D1B1B;
}

/* ========== 고대비 모드 (WCAG AAA 7:1) ========== */
body.high-contrast {
    --primary: #FFD600;
    --primary-light: #FFEB3B;
    --primary-dark: #F9A825;
    --secondary: #1A1A1A;
    --text-dark: #FFFFFF;
    --text-medium: #E0E0E0;
    --text-light: #BDBDBD;
    --white: #000000;
    --gray-bg: #0A0A0A;
    --gray-border: #999999;
    --danger: #FF6666;
    --danger-light: #330000;
    --shadow: none;
    --shadow-md: none;
    --shadow-lg: none;
    --card-border-width: 4px;
    --selected-border-width: 5px;
}

body.high-contrast .card {
    border-color: #888888;
}

body.high-contrast .card.selected {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary);
}

body.high-contrast .card-icon {
    background: transparent;
    border: 2px solid var(--primary);
}

body.high-contrast .emergency-btn {
    border-width: 3px;
    font-weight: 700;
}

body.high-contrast .tab-btn.active {
    border: 3px solid var(--primary);
}

body.high-contrast .output-text.has-message {
    border-color: var(--primary);
    border-width: 3px;
}

/* ========== 기본 스타일 ========== */
html,
body {
    height: 100%;
    overflow: hidden;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
    background: var(--gray-bg);
    color: var(--text-dark);
    line-height: 1.5;
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    font-size: var(--base-font-size);
}

/* ========== 글자 크기 ========== */
body.font-small {
    font-size: 14px;
}

body.font-medium {
    font-size: 16px;
}

body.font-large {
    font-size: 18px;
}

.hidden {
    display: none !important;
}

/* ========== 로딩 ========== */
.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 30px;
    color: var(--text-light);
}

.spinner {
    width: 24px;
    height: 24px;
    border: 3px solid var(--gray-border);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* ========== 애니메이션 ========== */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse {
    0%,
    100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

@keyframes cardSelect {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.06);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes iconBounce {
    0%,
    100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.2);
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes pulse-border {
    0%,
    100% {
        box-shadow: 0 0 0 0 rgba(43, 108, 176, 0.4);
    }
    50% {
        box-shadow: 0 0 0 4px rgba(43, 108, 176, 0);
    }
}

/* ========== 접근성: 움직임 감소 ========== */
@media (prefers-reduced-motion: reduce) {
    * {
        animation: none !important;
        transition: none !important;
    }
}